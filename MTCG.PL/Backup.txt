--
-- PostgreSQL database dump
--

-- Dumped from database version 13.4
-- Dumped by pg_dump version 13.4

-- Started on 2021-10-06 17:56:11

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 2 (class 3079 OID 32974)
-- Name: uuid-ossp; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS "uuid-ossp" WITH SCHEMA public;


--
-- TOC entry 3089 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION "uuid-ossp"; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION "uuid-ossp" IS 'generate universally unique identifiers (UUIDs)';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 206 (class 1259 OID 32874)
-- Name: card_instances; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.card_instances (
    id uuid NOT NULL,
    card_id uuid NOT NULL
);


ALTER TABLE public.card_instances OWNER TO mtcgadmin;

--
-- TOC entry 202 (class 1259 OID 32838)
-- Name: cards; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.cards (
    id uuid NOT NULL,
    name text NOT NULL,
    description text NOT NULL,
    type integer NOT NULL,
    damage integer NOT NULL,
    element integer NOT NULL,
    rarity integer NOT NULL,
    race integer
);


ALTER TABLE public.cards OWNER TO mtcgadmin;

--
-- TOC entry 212 (class 1259 OID 33069)
-- Name: deck_cards; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.deck_cards (
    card_instance_id uuid,
    deck_id uuid
);


ALTER TABLE public.deck_cards OWNER TO mtcgadmin;

--
-- TOC entry 211 (class 1259 OID 33061)
-- Name: decks; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.decks (
    id uuid NOT NULL,
    name text NOT NULL
);


ALTER TABLE public.decks OWNER TO mtcgadmin;

--
-- TOC entry 201 (class 1259 OID 32832)
-- Name: info; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.info (
    version text NOT NULL
);


ALTER TABLE public.info OWNER TO mtcgadmin;

--
-- TOC entry 209 (class 1259 OID 33010)
-- Name: offers; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.offers (
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    offered_card_id uuid NOT NULL,
    wanted_card_id uuid NOT NULL
);


ALTER TABLE public.offers OWNER TO mtcgadmin;

--
-- TOC entry 204 (class 1259 OID 32858)
-- Name: package_cards; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.package_cards (
    package_id uuid NOT NULL,
    card_id uuid NOT NULL
);


ALTER TABLE public.package_cards OWNER TO mtcgadmin;

--
-- TOC entry 203 (class 1259 OID 32850)
-- Name: packages; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.packages (
    id uuid NOT NULL,
    name text NOT NULL,
    description text NOT NULL,
    cost integer NOT NULL
);


ALTER TABLE public.packages OWNER TO mtcgadmin;

--
-- TOC entry 208 (class 1259 OID 32985)
-- Name: trades; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.trades (
    id uuid NOT NULL,
    card_one_id uuid NOT NULL,
    user_one_id uuid NOT NULL,
    user_two_id uuid NOT NULL,
    card_two_id uuid NOT NULL
);


ALTER TABLE public.trades OWNER TO mtcgadmin;

--
-- TOC entry 205 (class 1259 OID 32866)
-- Name: user_cards; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.user_cards (
    user_id uuid NOT NULL,
    card_instance_id uuid NOT NULL
);


ALTER TABLE public.user_cards OWNER TO mtcgadmin;

--
-- TOC entry 210 (class 1259 OID 33040)
-- Name: user_decks; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.user_decks (
    user_id uuid NOT NULL,
    deck_id uuid NOT NULL,
    main_deck boolean DEFAULT false NOT NULL
);


ALTER TABLE public.user_decks OWNER TO mtcgadmin;

--
-- TOC entry 207 (class 1259 OID 32882)
-- Name: users; Type: TABLE; Schema: public; Owner: mtcgadmin
--

CREATE TABLE public.users (
    username text NOT NULL,
    hash text NOT NULL,
    coins integer NOT NULL,
    elo integer NOT NULL,
    admin boolean NOT NULL,
    id uuid NOT NULL,
    played_games integer DEFAULT 0 NOT NULL
);


ALTER TABLE public.users OWNER TO mtcgadmin;

--
-- TOC entry 2923 (class 2606 OID 32938)
-- Name: card_instances card_instances_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.card_instances
    ADD CONSTRAINT card_instances_pkey PRIMARY KEY (id);


--
-- TOC entry 2925 (class 2606 OID 32934)
-- Name: card_instances card_instances_unique; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.card_instances
    ADD CONSTRAINT card_instances_unique UNIQUE (id, card_id);


--
-- TOC entry 2913 (class 2606 OID 32904)
-- Name: cards cards_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.cards
    ADD CONSTRAINT cards_pkey PRIMARY KEY (id);


--
-- TOC entry 2936 (class 2606 OID 33068)
-- Name: decks decks_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.decks
    ADD CONSTRAINT decks_pkey PRIMARY KEY (id);


--
-- TOC entry 2931 (class 2606 OID 33014)
-- Name: offers offers_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.offers
    ADD CONSTRAINT offers_pkey PRIMARY KEY (id);


--
-- TOC entry 2917 (class 2606 OID 32959)
-- Name: package_cards package_cards_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.package_cards
    ADD CONSTRAINT package_cards_pkey PRIMARY KEY (package_id, card_id);


--
-- TOC entry 2915 (class 2606 OID 32895)
-- Name: packages packages_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.packages
    ADD CONSTRAINT packages_pkey PRIMARY KEY (id);


--
-- TOC entry 2927 (class 2606 OID 32925)
-- Name: users unqiue_username; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT unqiue_username UNIQUE (username);


--
-- TOC entry 2919 (class 2606 OID 32893)
-- Name: user_cards user_cards_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.user_cards
    ADD CONSTRAINT user_cards_pkey PRIMARY KEY (user_id, card_instance_id);


--
-- TOC entry 2921 (class 2606 OID 32936)
-- Name: user_cards user_cards_unique; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.user_cards
    ADD CONSTRAINT user_cards_unique UNIQUE (user_id, card_instance_id);


--
-- TOC entry 2934 (class 2606 OID 33044)
-- Name: user_decks user_deck_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.user_decks
    ADD CONSTRAINT user_deck_pkey PRIMARY KEY (user_id, deck_id);


--
-- TOC entry 2929 (class 2606 OID 32927)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 2937 (class 1259 OID 33092)
-- Name: fki_fk_deck_cards_card_instance_id; Type: INDEX; Schema: public; Owner: mtcgadmin
--

CREATE INDEX fki_fk_deck_cards_card_instance_id ON public.deck_cards USING btree (card_instance_id);


--
-- TOC entry 2932 (class 1259 OID 33050)
-- Name: fki_fk_user_deck_user_id; Type: INDEX; Schema: public; Owner: mtcgadmin
--

CREATE INDEX fki_fk_user_deck_user_id ON public.user_decks USING btree (user_id);


--
-- TOC entry 2942 (class 2606 OID 32928)
-- Name: card_instances fk_card_instances_card_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.card_instances
    ADD CONSTRAINT fk_card_instances_card_id FOREIGN KEY (card_id) REFERENCES public.cards(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2953 (class 2606 OID 33087)
-- Name: deck_cards fk_deck_cards_card_instance_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.deck_cards
    ADD CONSTRAINT fk_deck_cards_card_instance_id FOREIGN KEY (card_instance_id) REFERENCES public.card_instances(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2952 (class 2606 OID 33072)
-- Name: deck_cards fk_deck_cards_user_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.deck_cards
    ADD CONSTRAINT fk_deck_cards_user_id FOREIGN KEY (card_instance_id) REFERENCES public.card_instances(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2948 (class 2606 OID 33020)
-- Name: offers fk_offers_offered_card_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.offers
    ADD CONSTRAINT fk_offers_offered_card_id FOREIGN KEY (offered_card_id) REFERENCES public.card_instances(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2947 (class 2606 OID 33015)
-- Name: offers fk_offers_user_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.offers
    ADD CONSTRAINT fk_offers_user_id FOREIGN KEY (user_id) REFERENCES public.users(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2949 (class 2606 OID 33025)
-- Name: offers fk_offers_wanted_card_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.offers
    ADD CONSTRAINT fk_offers_wanted_card_id FOREIGN KEY (wanted_card_id) REFERENCES public.cards(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2939 (class 2606 OID 32969)
-- Name: package_cards fk_package_cards_card_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.package_cards
    ADD CONSTRAINT fk_package_cards_card_id FOREIGN KEY (card_id) REFERENCES public.cards(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2938 (class 2606 OID 32964)
-- Name: package_cards fk_package_cards_package_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.package_cards
    ADD CONSTRAINT fk_package_cards_package_id FOREIGN KEY (package_id) REFERENCES public.packages(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2946 (class 2606 OID 33035)
-- Name: trades fk_trades_card_one_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.trades
    ADD CONSTRAINT fk_trades_card_one_id FOREIGN KEY (card_one_id) REFERENCES public.card_instances(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2945 (class 2606 OID 33030)
-- Name: trades fk_trades_card_two_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.trades
    ADD CONSTRAINT fk_trades_card_two_id FOREIGN KEY (card_two_id) REFERENCES public.card_instances(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2943 (class 2606 OID 32990)
-- Name: trades fk_trades_user_one_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.trades
    ADD CONSTRAINT fk_trades_user_one_id FOREIGN KEY (user_one_id) REFERENCES public.users(id);


--
-- TOC entry 2944 (class 2606 OID 32995)
-- Name: trades fk_trades_user_two_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.trades
    ADD CONSTRAINT fk_trades_user_two_id FOREIGN KEY (user_two_id) REFERENCES public.users(id);


--
-- TOC entry 2940 (class 2606 OID 32939)
-- Name: user_cards fk_user_cards_card_instance_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.user_cards
    ADD CONSTRAINT fk_user_cards_card_instance_id FOREIGN KEY (card_instance_id) REFERENCES public.card_instances(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2941 (class 2606 OID 32944)
-- Name: user_cards fk_user_cards_user_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.user_cards
    ADD CONSTRAINT fk_user_cards_user_id FOREIGN KEY (user_id) REFERENCES public.users(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2951 (class 2606 OID 33082)
-- Name: user_decks fk_user_deck_deck_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.user_decks
    ADD CONSTRAINT fk_user_deck_deck_id FOREIGN KEY (deck_id) REFERENCES public.decks(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2950 (class 2606 OID 33051)
-- Name: user_decks fk_user_deck_user_id; Type: FK CONSTRAINT; Schema: public; Owner: mtcgadmin
--

ALTER TABLE ONLY public.user_decks
    ADD CONSTRAINT fk_user_deck_user_id FOREIGN KEY (user_id) REFERENCES public.users(id) ON UPDATE CASCADE ON DELETE CASCADE;


-- Completed on 2021-10-06 17:56:12

--
-- PostgreSQL database dump complete
--

